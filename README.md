# message_gate - модульный бот для пересылки сообщений между беседами
message_gate позволяет пересылать сообщения между беседами в различных мессенджерах. На данный
момент поддерживается отправка и прием сообщений из телеграма и вк, а так же получение электронных
писем по протоколу IMAP и пересылка их в мессенджеры.
## Архитектура бота
msg8 - главный модуль. Отвечает за запуск и управление остальными модулями, а также за хранение и
передачу сообщений между модулями. 

recv/\* - принимающие модули (receivers). Отвечают за прием сообщений из различных источников и
преобразование их в промежуточное представление сообщений в формате JSON. 
Стандартный вывод: сообщения в виде объектов формата JSON, разделенные переводом строки `\n`.
Вывод *не* должен быть буфферизован.

send/\* - отправляющие модули (senders). Отвечают за определение чата назначения, преобразование в
нужный формат сообщений и их отправку. Стандартный ввод: пути к файлам, в которых хранятся сообщения
в формате JSON. После обработки очередного сообщения, содержащий его файл необходимо удалить.

filter/controller - фильтрующий модуль. Отвечает за обработку команд бота и пост-обработку
сообщений. Стандартный ввод и вывод: разделенные переводом строки сообщения в формате JSON.
Вывод *не* буфферизован. Если сообщение не проходит фильтр, то возвращается перевод строки без
сообщения.
## Формат сообщения
```json
{
    "from":"<отправитель сообщения>",
    "protocol":"[протокол, по которому принято это сообщение]",
    "text":"<текст сообщения>",
    "reply":false,  
    "//reply_comment":"отправлять сообщение по тому же протоколу?"
}
```

